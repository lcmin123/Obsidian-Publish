
- kerberos
	- **Application Layer
	- 대칭키 기반 분산 인증 시스템
	- 사용자가 서버에 엑세스하는데에 3가지 위험 존재
		- 사용자가 다른 사용자인 척 함
		- 사용자가 워크스테이션의 네트워크 주소 변경
		- 사용자가 도청, 재전송 공격 사용
	- 요구사항
		- 사용자는 로그인 세션 시작 시 한번 식별해야됨
		- 비밀번호는 네트워크를 통해 평문으로 전송되지 않음(메모리에 저장되지 않음)
		- 각 서버가 사용자의 비밀번호를 저장할 필요 없어야함
	- 구성요소
		- 서버, 사용자
		- 인증 서버(AS: Authentication Server)
			- 모든 사용자, 서버의 비밀번호 안다
			- TGS에 제시할 티켓 발급
		- 티켓 발급 서버(TGS: Ticket Granting Server)
			- 서버는 티켓만 받는다
			- 서비스 요청 시, 한 사용자는 한 서버에 한 티켓 제시
			- 서버에 제시할 티켓 발급
	- 티켓
		- 사용자는 항상 서버에 매번 패스워드 입력할 필요 없음
		- 사용자가 세션에 최초 로그인 시, AS에게 인증을 요청하고 인증을 받은 후, TGS로부터 티켓을 받아 서비스에 접근할 수 있게됨
		- 티켓은 유효기간이 있으며, 이 기간동안 사용자는 서버에 다시 로그인할때 비번을 다시 입력하지 않아도 됨
		- 티켓에 타임스탬프 추가로 보안성 향상 가능
	- 프로토콜
		- 유저/TGS는 AS에, 서버는 TGS에 등록 되어있다
		- 유저가 서비스 필요
		- 서비스 제공할 서버 찾는다
		- 해당 서버 관리하는 TGS 찾는다
		- AS에 TGS에 보낼 티켓 요청
	- 진행 과정![[Pasted image 20231127142623.png|]]
		1. 
		- 사용자는 AS에게 UserID, TGS 이름을 K(user-AS)로 암호화하여 보낸다
		2. 
		- AS는 User와 TGS간의 통신을 위한 세션키1 K(user-TGS)를 생성
		   - 세션키1, UserID를 K(AG-TGS)로 암호화 하여 사용자에게 발급할 티켓을 생성
		   - 세션키1과 티켓을 K(user-AS)로 암호화하여 보낸다 →대칭키
		3. 
		- 사용자는 받은 2를 K(user-AS)로 복호화해서 세션키1 K(user-TGS)와 티켓을 얻는다
		   - UserID를 세션키1로 암호화하여 티켓과 함께 TGS로 보낸다
		4. 
		- TGS는 받은 3을 K(user-TGS)와 K(AS-TGS)로 복호화하여 User정보와 요구내용 확인
		   - 사용자와 서버간의 통신을 위한 세션키2 K(user-server) 생성
		   - 세션키2, UserID를 K(TGS-server)로 암호화하여 사용자에게 발급할 티켓 생성
		   - 세션키2와 티켓을 K(user-TGS)로 암호화하여 보낸다
		5. 
		- 사용자는 받은 4를 K(user-TGS)로 복호화하여 세션키2 K(user-server)와 티켓(user,server)를 얻는다.
		   - 서버에게 K(user-server)로 암호화한 UserID와 티켓을 전송한다
		6. 
		- 서버는 받는 5의 티켓을 K(TGS-server)로 복호화하여 세션키2 K(user-server)를 얻는다
		   - UserID를 복호화하여 사용자 확인을 한다

